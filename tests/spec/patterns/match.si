// Spec: spec/10-patterns.md § match - Pattern Matching
// Design: design/02-syntax/04-patterns-reference.md § match
//
// Tests the match pattern for pattern matching

// Helper function for tests
@identity (x: int) -> int = x

// =============================================================================
// Test: Match on literal values
// Spec: spec/10-patterns.md § match - Literal Patterns
// Design: design/02-syntax/04-patterns-reference.md § match - Literals
// =============================================================================
@test_match_literal tests @identity () -> void = run(
    let x = 2,
    let result = match(x,
        1 -> "one",
        2 -> "two",
        3 -> "three",
        _ -> "other",
    ),
    assert_eq(result, "two"),
)

// =============================================================================
// Test: Wildcard pattern matches anything
// Spec: spec/10-patterns.md § match - Wildcard Pattern
// Design: design/02-syntax/04-patterns-reference.md § match - Wildcard
// =============================================================================
@test_match_wildcard tests @identity () -> void = run(
    let x = 99,
    let result = match(x,
        1 -> "one",
        _ -> "other",
    ),
    assert_eq(result, "other"),
)

// =============================================================================
// Test: Match on expression results
// Spec: spec/10-patterns.md § match - Semantics
// Design: design/02-syntax/04-patterns-reference.md § match - Expressions
// =============================================================================
@test_match_with_expressions tests @identity () -> void = run(
    let x = 5,
    let result = match(x > 3,
        true -> "big",
        false -> "small",
    ),
    assert_eq(result, "big"),
)
