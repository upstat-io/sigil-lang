// Spec: 07-properties-of-types.md ยง Debug Trait
// Tests for Debug trait on primitive types

use std.testing { assert_eq }

// =============================================================================
// Integer Debug
// =============================================================================

@test_int_debug tests @int_debug () -> void = {
    assert_eq(actual: 42.debug(), expected: "42");
    assert_eq(actual: 0.debug(), expected: "0");
    assert_eq(actual: -1.debug(), expected: "-1")
}

@int_debug () -> str = 42.debug();

// =============================================================================
// Float Debug
// =============================================================================

@test_float_debug tests @float_debug () -> void = {
    assert_eq(actual: 3.14.debug(), expected: "3.14");
    assert_eq(actual: 0.0.debug(), expected: "0")
}

@float_debug () -> str = 3.14.debug();

// =============================================================================
// Bool Debug
// =============================================================================

@test_bool_debug tests @bool_debug () -> void = {
    assert_eq(actual: true.debug(), expected: "true");
    assert_eq(actual: false.debug(), expected: "false")
}

@bool_debug () -> str = true.debug();

// =============================================================================
// String Debug (shows escaped quotes)
// =============================================================================

@test_str_debug_simple tests @str_debug_simple () -> void = {
    assert_eq(actual: "hello".debug(), expected: "\"hello\"")
}

@str_debug_simple () -> str = "hello".debug();

@test_str_debug_escapes tests @str_debug_escapes () -> void = {
    // Newline is escaped in debug output
    assert_eq(actual: "a\nb".debug(), expected: "\"a\\nb\"");
    // Tab is escaped
    assert_eq(actual: "a\tb".debug(), expected: "\"a\\tb\"")
}

@str_debug_escapes () -> str = "a\nb".debug();

// =============================================================================
// Char Debug (shows single-quoted)
// =============================================================================

@test_char_debug tests @char_debug () -> void = {
    assert_eq(actual: 'a'.debug(), expected: "'a'")
}

@char_debug () -> str = 'a'.debug();

@test_char_debug_escape tests @char_debug_escape () -> void = {
    assert_eq(actual: '\n'.debug(), expected: "'\\n'");
    assert_eq(actual: '\t'.debug(), expected: "'\\t'")
}

@char_debug_escape () -> str = '\n'.debug();

// =============================================================================
// Byte Debug
// =============================================================================
// Note: byte values are currently stored as Value::Int in the evaluator,
// so byte.debug() behaves like int.debug(). When byte storage is fixed,
// it should show hex format (e.g. "0x2a").

@test_byte_debug tests @byte_debug () -> void = {
    let b: byte = 42;
    assert_eq(actual: b.debug(), expected: "42")
}

@byte_debug () -> str = {
    let b: byte = 42;
    b.debug()
}

// =============================================================================
// Ordering Debug
// =============================================================================

@test_ordering_debug tests @ordering_debug () -> void = {
    assert_eq(actual: Less.debug(), expected: "Less");
    assert_eq(actual: Equal.debug(), expected: "Equal");
    assert_eq(actual: Greater.debug(), expected: "Greater")
}

@ordering_debug () -> str = Less.debug();

// =============================================================================
// Duration Debug
// =============================================================================

@test_duration_debug tests @duration_debug () -> void = {
    assert_eq(actual: 100ms.debug(), expected: "100ms");
    assert_eq(actual: 1s.debug(), expected: "1s")
}

@duration_debug () -> str = 100ms.debug();

// =============================================================================
// Size Debug
// =============================================================================

@test_size_debug tests @size_debug () -> void = {
    assert_eq(actual: 1kb.debug(), expected: "1kb");
    assert_eq(actual: 0b.debug(), expected: "0b")
}

@size_debug () -> str = 1kb.debug();
