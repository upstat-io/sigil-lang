// Spec: 08-declarations.md § Trait Resolution — Transitive Default Inheritance
// Tests that default methods are inherited from the entire super-trait
// hierarchy, not just the direct parent trait.

use std.testing { assert_eq }

// Chain: A -> B -> C
// A has a default method; C should inherit it through B.

trait A {
    @greet (self) -> str = "hello from A"
}

trait B: A {
    @info (self) -> str
}

trait C: B {
    @label (self) -> str
}

type Item = { name: str }

impl A for Item {}  // uses default greet from A

impl B for Item {
    @info (self) -> str = "info:" + self.name
}

impl C for Item {
    @label (self) -> str = "label:" + self.name
}

// Test that default method from A is available
@test_inherited_default tests @greet () -> void = {
    let item = Item { name: "test" };
    assert_eq(actual: item.greet(), expected: "hello from A")
}

@test_direct_method tests @info () -> void = {
    let item = Item { name: "test" };
    assert_eq(actual: item.info(), expected: "info:test")
}

@test_leaf_method tests @label () -> void = {
    let item = Item { name: "test" };
    assert_eq(actual: item.label(), expected: "label:test")
}
