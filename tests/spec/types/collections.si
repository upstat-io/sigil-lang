// Spec Tests: 06-types.md ยง Collection Types
// Tests are the source of truth - the compiler must conform to these tests

// =============================================================================
// List Type (Spec: list_type = "[" type "]")
// =============================================================================

@list_of_ints () -> [int] = [1, 2, 3]

@list_empty () -> [int] = []

@list_nested () -> [[int]] = [[1, 2], [3, 4]]

#[skip("list function evaluation not yet supported")]
@test_list_types tests @list_of_ints tests @list_empty tests @list_nested () -> void = run(
    assert(len(list_of_ints()) == 3),
    assert(len(list_empty()) == 0),
    assert(len(list_nested()) == 2),
)

// =============================================================================
// Map Type (Spec: map_type = "{" type ":" type "}")
// =============================================================================

@map_str_int () -> {str: int} = {"a": 1, "b": 2}

@map_empty () -> {str: int} = {}

#[skip("map type syntax not yet supported")]
@test_map_types tests @map_str_int tests @map_empty () -> void = run(
    assert(len(map_str_int()) == 2),
    assert(len(map_empty()) == 0),
)

// =============================================================================
// Tuple Type (Spec: tuple_type = "(" type "," type { "," type } ")")
// =============================================================================

@tuple_pair () -> (int, str) = (42, "hello")

@tuple_triple () -> (int, int, int) = (1, 2, 3)

#[skip("tuple type syntax not yet supported")]
@test_tuple_types tests @tuple_pair tests @tuple_triple () -> void = run(
    assert(true),
)

// =============================================================================
// Option Type (Spec: Option<T> = Some(T) | None)
// =============================================================================

@option_some () -> Option<int> = Some(42)

@option_none () -> Option<int> = None

#[skip("Option type not yet supported")]
@test_option_types tests @option_some tests @option_none () -> void = run(
    assert(true),
)

// =============================================================================
// Result Type (Spec: Result<T, E> = Ok(T) | Err(E))
// =============================================================================

@result_ok () -> Result<int, str> = Ok(42)

@result_err () -> Result<int, str> = Err("failed")

#[skip("Result type not yet supported")]
@test_result_types tests @result_ok tests @result_err () -> void = run(
    assert(true),
)
