use std.testing { assert_eq }

// Sum type with multiple fields
type Event = Click(x: int, y: int) | Keypress(key: str, shift: bool) | Quit;

@describe_event (e: Event) -> str = match e {
    Click(x, y) -> "click at " + str(x) + "," + str(y),
    Keypress(key, _) -> "key: " + key,
    Quit -> "quit"
}

@test_multi_field tests @describe_event () -> void = {
    assert_eq(
        actual: describe_event(e: Click(x: 10, y: 20)),
        expected: "click at 10,20",
    );
    assert_eq(
        actual: describe_event(e: Keypress(key: "a", shift: false)),
        expected: "key: a",
    );
    assert_eq(
        actual: describe_event(e: Quit),
        expected: "quit",
    )
}
