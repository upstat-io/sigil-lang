// Spec: 06-types.md § Primitive Types
// Design: 03-type-system/01-primitive-types.md

// =============================================================================
// int — 64-bit Signed Integer
// =============================================================================
// Spec: 06-types.md § Integer Type
// Design: 03-type-system/01-primitive-types.md § int

@test_int_literal tests @int_literal () -> void = run(
    let x = 42,
    assert_eq(
        .actual: x,
        .expected: 42,
    ),
)

@int_literal () -> int = 42

@test_int_negative tests @int_negative () -> void = run(
    let x = -17,
    assert_eq(
        .actual: x,
        .expected: -17,
    ),
)

@int_negative () -> int = -17

@test_int_zero tests @int_zero () -> void = run(
    let x = 0,
    assert_eq(
        .actual: x,
        .expected: 0,
    ),
)

@int_zero () -> int = 0

@test_int_underscore tests @int_underscore () -> void = run(
    let x = 1_000_000,
    assert_eq(
        .actual: x,
        .expected: 1000000,
    ),
)

@int_underscore () -> int = 1_000_000

@test_int_hex tests @int_hex () -> void = run(
    let x = 0xFF,
    assert_eq(
        .actual: x,
        .expected: 255,
    ),
)

@int_hex () -> int = 0xFF

@test_int_annotated tests @int_annotated () -> void = run(
    let x: int = 42,
    assert_eq(
        .actual: x,
        .expected: 42,
    ),
)

@int_annotated () -> int = run(
    let x: int = 42,
    x,
)

@test_int_arithmetic tests @int_arithmetic () -> void = run(
    assert_eq(
        .actual: 3 + 2,
        .expected: 5,
    ),
    assert_eq(
        .actual: 3 - 2,
        .expected: 1,
    ),
    assert_eq(
        .actual: 3 * 2,
        .expected: 6,
    ),
    assert_eq(
        .actual: 7 / 2,
        .expected: 3,
    ),
    assert_eq(
        .actual: 7 % 2,
        .expected: 1,
    ),
    assert_eq(
        .actual: -7 / 3,
        .expected: -2,
    ),
    // TODO: div operator not yet implemented in sigilc-v3 parser
    // assert_eq(
    //     .actual: -7 div 3,
    //     .expected: -3,
    // ),
)

@int_arithmetic () -> int = 3 + 2

@test_int_comparison tests @int_comparison () -> void = run(
    assert(1 < 2),
    assert(2 > 1),
    assert(2 <= 2),
    assert(2 >= 2),
    assert(2 == 2),
    assert(1 != 2),
)

@int_comparison () -> bool = 1 < 2
