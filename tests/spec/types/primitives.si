// Spec: spec/06-types.md § Primitive Types
// Design: design/03-type-system/01-primitive-types.md
//
// Tests primitive types

// =============================================================================
// Integer Type
// Spec: spec/06-types.md § 64-bit signed integer
// =============================================================================

@int_default () -> int = 0

@test_int_default tests @int_default () -> void = run(
    assert(int_default() == 0),
)

// Helper for tests
@identity (x: int) -> int = x

@test_int_operations tests @identity () -> void = run(
    assert(2 + 3 == 5),
    assert(10 - 4 == 6),
    assert(3 * 4 == 12),
    assert(15 / 3 == 5),
    assert(17 % 5 == 2),
)

@test_int_comparison tests @identity () -> void = run(
    assert(1 < 2),
    assert(2 > 1),
    assert(3 <= 3),
    assert(4 >= 4),
    assert(5 == 5),
    assert(5 != 6),
)

// =============================================================================
// Floating-Point Type
// Spec: spec/06-types.md § 64-bit IEEE 754
// =============================================================================

@float_default () -> float = 0.0

@test_float_default tests @float_default () -> void = run(
    assert(float_default() == 0.0),
)

@test_float_operations tests @identity () -> void = run(
    assert(2.0 + 3.0 == 5.0),
    assert(10.0 - 4.0 == 6.0),
    assert(3.0 * 4.0 == 12.0),
    assert(15.0 / 3.0 == 5.0),
)

// =============================================================================
// Boolean Type
// Spec: spec/06-types.md § Values: true, false
// =============================================================================

@bool_default () -> bool = false

@test_bool_default tests @bool_default () -> void = run(
    assert(bool_default() == false),
)

@test_bool_operations tests @identity () -> void = run(
    assert((true && true) == true),
    assert((true && false) == false),
    assert((true || false) == true),
    assert((false || false) == false),
    assert(!true == false),
    assert(!false == true),
)

// =============================================================================
// String Type
// Spec: spec/06-types.md § UTF-8 encoded string
// =============================================================================

@str_default () -> str = ""

@test_str_default tests @str_default () -> void = run(
    assert(str_default() == ""),
)

@test_str_concatenation tests @identity () -> void = run(
    assert("hello" + " " + "world" == "hello world"),
    assert("" + "x" == "x"),
)

@test_str_comparison tests @identity () -> void = run(
    assert("abc" == "abc"),
    assert("abc" != "def"),
)

// =============================================================================
// Void Type
// Spec: spec/06-types.md § unit type, single value ()
// =============================================================================

@void_func () -> void = run(
    let x = 42,
)

@test_void tests @void_func () -> void = run(
    void_func(),
    assert(true),
)
