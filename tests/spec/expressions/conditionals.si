// Spec: spec/09-expressions.md § Conditionals
// Design: design/02-syntax/02-expressions.md § If-Then-Else
//
// Tests if/then/else expressions

// Helper function for tests
@identity (x: int) -> int = x

// =============================================================================
// Test: Basic if-then-else
// Spec: spec/09-expressions.md § if_expr
// =============================================================================
@test_if_then_else tests @identity () -> void = run(
    assert_eq(if true then 1 else 2, 1),
    assert_eq(if false then 1 else 2, 2),
)

// =============================================================================
// Test: If with comparison
// Spec: spec/09-expressions.md § if_expr - Condition
// =============================================================================
@test_if_comparison tests @identity () -> void = run(
    let x = 10,
    assert_eq(if x > 5 then "big" else "small", "big"),
    assert_eq(if x < 5 then "small" else "big", "big"),
)

// =============================================================================
// Test: Nested if expressions
// Spec: spec/09-expressions.md § if_expr - Chaining
// =============================================================================
@test_nested_if tests @identity () -> void = run(
    let x = 5,
    let result = if x < 0 then "negative"
        else if x == 0 then "zero"
        else "positive",
    assert_eq(result, "positive"),
)

// =============================================================================
// Test: If as expression
// Spec: spec/09-expressions.md § if_expr - Expression
// =============================================================================
@test_if_with_expressions tests @identity () -> void = run(
    let a = 3,
    let b = 4,
    let max = if a > b then a else b,
    assert_eq(max, 4),
)
