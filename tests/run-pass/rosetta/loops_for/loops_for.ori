// Rosetta Code: Loops/For
// Task: Demonstrate a for-loop
// In Ori, iteration is done via patterns like collect, map, and fold

// Print numbers 1 to 5 (collect builds a list from a range)
@count_to_five () -> [int] = collect(
    range: 1..6,
    transform: x -> x,
)

// Sum numbers 1 to n using fold
@sum_to_n (n: int) -> int = fold(
    over: collect(
        range: 1..(n + 1),
        transform: x -> x,
    ),
    init: 0,
    op: (acc, x) -> acc + x,
)

// Square each number in a range
@squares (n: int) -> [int] = collect(
    range: 1..(n + 1),
    transform: x -> x * x,
)

// Classic for-loop pattern: do something n times
// Returns list of results
@repeat_n (n: int, value: int) -> [int] = collect(
    range: 0..n,
    transform: i -> value,
)

// For-each over a list using map
@double_all (arr: [int]) -> [int] = map(
    over: arr,
    transform: x -> x * 2,
)

// For-loop with index access
@with_indices (arr: [int]) -> [str] = map(
    over: collect(
        range: 0..len(collection: arr),
        transform: i -> i,
    ),
    transform: i -> "Index " + str(i) + ": " + str(arr[i]),
)

@main () -> void = run(
    print(msg: "Count 1-5: " + str(count_to_five())),
    print(msg: "Sum 1-10: " + str(sum_to_n(10))),
    print(msg: "Squares 1-5: " + str(squares(5))),
    print(msg: "Repeat 3 five times: " + str(repeat_n(n: 5, value: 3))),
    print(msg: "Double [1,2,3]: " + str(double_all([1, 2, 3])))
)
