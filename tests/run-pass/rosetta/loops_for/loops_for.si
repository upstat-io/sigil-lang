// Rosetta Code: Loops/For
// Task: Demonstrate a for-loop
// In Sigil, iteration is done via patterns like collect, map, and fold

// Print numbers 1 to 5 (collect builds a list from a range)
@count_to_five () -> [int] = collect(1..6, x -> x)

// Sum numbers 1 to n using fold
@sum_to_n (n: int) -> int = fold(
    .over: collect(1..(n + 1), x -> x),
    .init: 0,
    .op: (acc, x) -> acc + x
)

// Square each number in a range
@squares (n: int) -> [int] = collect(1..(n + 1), x -> x * x)

// Classic for-loop pattern: do something n times
// Returns list of results
@repeat_n (n: int, value: int) -> [int] = collect(0..n, i -> value)

// For-each over a list using map
@double_all (arr: [int]) -> [int] = map(
    .over: arr,
    .transform: x -> x * 2
)

// For-loop with index access
@with_indices (arr: [int]) -> [str] = map(
    .over: collect(0..len(arr), i -> i),
    .transform: i -> "Index " + str(i) + ": " + str(arr[i])
)

@main () -> void = run(
    print("Count 1-5: " + str(count_to_five())),
    print("Sum 1-10: " + str(sum_to_n(10))),
    print("Squares 1-5: " + str(squares(5))),
    print("Repeat 3 five times: " + str(repeat_n(5, 3))),
    print("Double [1,2,3]: " + str(double_all([1, 2, 3])))
)
