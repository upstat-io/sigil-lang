// Tests for Fibonacci

use std.testing { assert, assert_eq, assert_ne }
use "../fibonacci" { fib, fib_parallel }

@test_fib_base tests @fib () -> void = run(
    assert(cond: fib(0) == 0),
    assert(cond: fib(1) == 1)
)

@test_fib_sequence tests @fib () -> void = run(
    assert(cond: fib(2) == 1),
    assert(cond: fib(3) == 2),
    assert(cond: fib(4) == 3),
    assert(cond: fib(5) == 5),
    assert(cond: fib(6) == 8),
    assert(cond: fib(7) == 13)
)

@test_fib_larger tests @fib () -> void = run(
    assert(cond: fib(10) == 55),
    assert(cond: fib(15) == 610),
    assert(cond: fib(20) == 6765)
)

@test_fib_parallel tests @fib_parallel () -> void = run(
    // Compute fib(10), fib(15), fib(20) in parallel
    assert(cond: fib_parallel(a: 10, b: 15, c: 20).first == 55),
    assert(cond: fib_parallel(a: 10, b: 15, c: 20).second == 610),
    assert(cond: fib_parallel(a: 10, b: 15, c: 20).third == 6765)
)
