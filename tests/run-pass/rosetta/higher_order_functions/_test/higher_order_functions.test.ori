// Tests for Higher-order functions
// Uses map, filter, fold methods from stdlib

use std.testing { assert, assert_eq, assert_ne }
use "../higher_order_functions" {
    double_all,
    square_all,
    filter_positive,
    filter_even,
    sum,
    product,
}

@test_double_all tests @double_all () -> void = {
    assert(cond: double_all(arr: []) == []);
    assert(cond: double_all(arr: [1]) == [2]);
    assert(cond: double_all(arr: [1, 2, 3]) == [2, 4, 6])
}

@test_square_all tests @square_all () -> void = {
    assert(cond: square_all(arr: []) == []);
    assert(cond: square_all(arr: [1, 2, 3]) == [1, 4, 9]);
    assert(cond: square_all(arr: [4, 5]) == [16, 25])
}

@test_filter_positive tests @filter_positive () -> void = {
    assert(cond: filter_positive(arr: []) == []);
    assert(cond: filter_positive(arr: [1, 2, 3]) == [1, 2, 3]);
    assert(cond: filter_positive(arr: [-1, 0, 1, 2]) == [1, 2])
}

@test_filter_even tests @filter_even () -> void = {
    assert(cond: filter_even(arr: []) == []);
    assert(cond: filter_even(arr: [1, 2, 3, 4]) == [2, 4]);
    assert(cond: filter_even(arr: [1, 3, 5]) == [])
}

@test_sum tests @sum () -> void = {
    assert(cond: sum(arr: []) == 0);
    assert(cond: sum(arr: [1]) == 1);
    assert(cond: sum(arr: [1, 2, 3, 4, 5]) == 15)
}

@test_product tests @product () -> void = {
    assert(cond: product(arr: []) == 1);
    assert(cond: product(arr: [5]) == 5);
    assert(cond: product(arr: [1, 2, 3, 4]) == 24)
}
