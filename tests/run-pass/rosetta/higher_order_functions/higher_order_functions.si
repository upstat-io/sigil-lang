// Rosetta Code: Higher-order functions
// Task: Demonstrate passing functions as arguments

// Apply a function to each element (using map pattern)
@apply_to_all (arr: [int], f: (int) -> int) -> [int] = map(
    .over: arr,
    .transform: f,
)

// Double each element using map
@double_all (arr: [int]) -> [int] = map(
    .over: arr,
    .transform: x -> x * 2,
)

// Square each element using map
@square_all (arr: [int]) -> [int] = map(
    .over: arr,
    .transform: x -> x * x,
)

// Filter elements using predicate
@filter_positive (arr: [int]) -> [int] = filter(
    .over: arr,
    .predicate: x -> x > 0,
)

// Filter even numbers
@filter_even (arr: [int]) -> [int] = filter(
    .over: arr,
    .predicate: x -> x % 2 == 0,
)

// Reduce a list using fold
@sum (arr: [int]) -> int = fold(
    .over: arr,
    .init: 0,
    .op: (acc, x) -> acc + x,
)

// Product using fold
@product (arr: [int]) -> int = fold(
    .over: arr,
    .init: 1,
    .op: (acc, x) -> acc * x,
)
