// Test variable shadowing with let

use std.testing { assert, assert_eq, assert_ne }

@shadow_int () -> int = {
    let x = 5;
    let x = x + 10;  // OK: shadowing, not reassignment
    x
}

@test_shadow_int tests @shadow_int () -> void = {
    assert_eq(actual: shadow_int(), expected: 15)
}

// Test type change through shadowing
@shadow_type_change () -> str = {
    let x = 42;
    let x = str(x);  // OK: shadowing with different type
    x
}

@test_shadow_type tests @shadow_type_change () -> void = {
    assert_eq(actual: shadow_type_change(), expected: "42")
}

// Test nested shadowing in blocks
@nested_shadow () -> int = {
    let x = 1;
    let y = {
        let x = 100;
        x
    };
    x + y
}

@test_nested_shadow tests @nested_shadow () -> void = {
    assert_eq(actual: nested_shadow(), expected: 101)
}
