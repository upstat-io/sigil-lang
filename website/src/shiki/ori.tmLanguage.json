{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "Ori",
    "scopeName": "source.ori",
    "patterns": [
        { "include": "#comment" },
        { "include": "#string" },
        { "include": "#number" },
        { "include": "#attribute" },
        { "include": "#function-declaration" },
        { "include": "#config-var" },
        { "include": "#keyword" },
        { "include": "#constant" },
        { "include": "#type" },
        { "include": "#support-function" },
        { "include": "#function-call" },
        { "include": "#named-arg" },
        { "include": "#operator" }
    ],
    "repository": {
        "comment": {
            "name": "comment.line.double-slash.ori",
            "match": "//.*$"
        },
        "string": {
            "patterns": [
                {
                    "name": "string.quoted.double.ori",
                    "begin": "\"",
                    "end": "\"",
                    "patterns": [
                        { "name": "constant.character.escape.ori", "match": "\\\\." }
                    ]
                },
                {
                    "name": "string.quoted.single.ori",
                    "begin": "'",
                    "end": "'",
                    "patterns": [
                        { "name": "constant.character.escape.ori", "match": "\\\\." }
                    ]
                }
            ]
        },
        "number": {
            "name": "constant.numeric.ori",
            "match": "\\b\\d+(\\.\\d+)?([eE][+-]?\\d+)?(ms|[hms]|[kmgt]?b)?\\b"
        },
        "attribute": {
            "name": "meta.attribute.ori",
            "begin": "#\\[",
            "end": "\\]",
            "beginCaptures": {
                "0": { "name": "punctuation.definition.attribute.ori" }
            },
            "endCaptures": {
                "0": { "name": "punctuation.definition.attribute.ori" }
            },
            "patterns": [
                { "include": "#string" },
                { "name": "entity.other.attribute-name.ori", "match": "[a-zA-Z_][a-zA-Z0-9_]*" }
            ]
        },
        "function-declaration": {
            "match": "@[_a-zA-Z][_a-zA-Z0-9]*",
            "name": "meta.definition.function entity.name.function"
        },
        "config-var": {
            "match": "\\$[_a-zA-Z][_a-zA-Z0-9]*",
            "name": "variable.other.constant.ori"
        },
        "keyword": {
            "name": "keyword.control.ori",
            "match": "\\b(if|then|else|match|for|in|do|yield|loop|break|continue|return|async|await|let|mut|use|pub|type|trait|impl|where|self|Self|tests|uses|with|dyn)\\b"
        },
        "constant": {
            "name": "constant.language.ori",
            "match": "\\b(true|false|nil|Ok|Err|Some|None|Less|Equal|Greater)\\b"
        },
        "type": {
            "patterns": [
                {
                    "name": "entity.name.type",
                    "match": "\\b(int|float|str|bool|char|byte|void|Never)\\b"
                },
                {
                    "name": "entity.name.type",
                    "match": "\\b(Result|Option|Duration|Size|Range|Channel|Ordering|Error|Set)\\b"
                },
                {
                    "name": "entity.name.type",
                    "match": "\\b[A-Z][a-zA-Z0-9_]*\\b"
                }
            ]
        },
        "support-function": {
            "match": "(run|map|filter|fold|find|collect|recurse|parallel|timeout|retry|try|validate|cache|count|iterate|transform|print|println|len|compare|panic|assert|assert_eq|assert_err)(\\()",
            "captures": {
                "1": { "name": "entity.name.function meta.function-call.generic support.function" },
                "2": { "name": "punctuation.brackets.round.ori" }
            }
        },
        "function-call": {
            "match": "([_a-z][_a-zA-Z0-9]*)(\\()",
            "captures": {
                "1": { "name": "entity.name.function meta.function-call.generic" },
                "2": { "name": "punctuation.brackets.round.ori" }
            }
        },
        "named-arg": {
            "match": "(\\.)([:a-zA-Z_][a-zA-Z0-9_]*)(:)",
            "captures": {
                "1": { "name": "punctuation.accessor.ori" },
                "2": { "name": "variable.parameter.ori" },
                "3": { "name": "punctuation.separator.ori" }
            }
        },
        "operator": {
            "name": "keyword.operator.ori",
            "match": "->|=>|==|!=|<=|>=|<|>|&&|\\|\\||[+\\-*/%=]|\\.\\.|\\|>|\\?\\?|\\?"
        }
    }
}
