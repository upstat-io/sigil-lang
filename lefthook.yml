# Lefthook configuration for git hooks
# Install: https://github.com/evilmartians/lefthook
#   macOS:  brew install lefthook
#   Linux:  wget -O ~/.local/bin/lefthook https://github.com/evilmartians/lefthook/releases/latest/download/lefthook_Linux_x86_64 && chmod +x ~/.local/bin/lefthook
#   Any:    go install github.com/evilmartians/lefthook@latest
# Then run: lefthook install

pre-commit:
  commands:
    fmt:
      run: ./fmt-all.sh
      stage_fixed: true
    clippy:
      run: ./clippy-all.sh
      stage_fixed: true
    test:
      run: ./test-all.sh
    version-sync:
      glob: "**/Cargo.toml|**/package.json"
      run: ./scripts/sync-version.sh --check

commit-msg:
  commands:
    conventional-commit:
      run: .lefthook/commit-msg.sh {1}
