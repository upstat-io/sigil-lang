# E3002: Invalid Pattern Arguments

The arguments provided to a pattern are invalid.

## Example

```ori
@main () -> void = run(
    recurse(
        condition: "not a bool",    // Error: condition must be bool
        base: 1,
        step: self(n - 1)
    )
)
```

## Explanation

Each pattern has specific requirements for its arguments. This error occurs
when an argument has the wrong type or an invalid value.

## Argument Requirements by Pattern

### `recurse`
- `condition`: must be `bool` expression
- `base`: any expression (return value when condition is true)
- `step`: expression using `self(...)` for recursion
- `memo`: must be `bool` literal (optional)
- `parallel`: must be numeric threshold (optional)

### `parallel` / `spawn`
- `tasks`: must be a list expression
- `max_concurrent`: must be positive `int` (optional)
- `timeout`: must be `Duration` (optional, parallel only)

### `timeout`
- `op`: any expression
- `after`: must be `Duration`

### `cache`
- `key`: must be `Hashable` type
- `op`: any expression
- `ttl`: must be `Duration` (optional)

### `with`
- `acquire`: any expression
- `use`: must be a lambda taking the acquired resource
- `release`: must be a lambda taking the resource (optional)

## Common Causes

1. **Wrong type for condition:**
   ```ori
   // Wrong
   recurse(condition: 0, ...)    // int, not bool

   // Right
   recurse(condition: n <= 0, ...)
   ```

2. **Invalid timeout duration:**
   ```ori
   // Wrong
   timeout(op: work(), after: 5)    // int, not Duration

   // Right
   timeout(op: work(), after: 5s)
   ```

3. **Tasks not a list:**
   ```ori
   // Wrong
   parallel(tasks: task1)    // single value

   // Right
   parallel(tasks: [task1, task2, task3])
   ```

## Solutions

1. **Use correct types:**
   ```ori
   recurse(
       condition: n <= 1,           // bool
       base: 1,                     // return value
       step: n * self(n - 1),       // recursive step
       memo: true                   // bool literal
   )
   ```

2. **Use Duration literals:**
   ```ori
   timeout(op: slow_work(), after: 30s)
   cache(key: user_id, op: fetch(user_id), ttl: 5m)
   ```

3. **Wrap tasks in a list:**
   ```ori
   parallel(tasks: [
       () -> fetch_a(),
       () -> fetch_b(),
       () -> fetch_c()
   ])
   ```

## See Also

- E1009: Missing pattern argument
- E1010: Unknown pattern argument
- E3001: Unknown pattern
